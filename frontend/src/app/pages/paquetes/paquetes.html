<app-header></app-header>
<div class="paquetes-header">
  <h1>Paquetes Disponibles</h1>

  <div class="acciones">
    <button class="btn-avanzada" (click)="toggleBusquedaAvanzada()">
      BÃºsqueda avanzada
    </button>

    <div class="cart" (click)="abrirCarrito()">
      <span class="icono">ğŸ›’</span>
      <span class="badge">{{ carrito.length }}</span>
    </div>
  </div>
</div>
<main class="paquetes-container">

  <!-- FILTROS -->
  <aside class="sidebar">
    
    <h3>Precios:</h3>

    <div class="precio-slider">
      <input type="number" [(ngModel)]="precioMin">
      <input type="number" [(ngModel)]="precioMax">
    </div>

    <input 
      type="range" 
      min="0" max="100" 
      [(ngModel)]="precioMin"
    >
    <input 
      type="range" 
      min="0" max="150" 
      [(ngModel)]="precioMax"
    >
    <p>S/.{{precioMin}} â€” S/.{{precioMax}}</p>


    <h3>ReseÃ±as:</h3>

    <div class="stars-filter">
      <div 
        *ngFor="let s of [5,4,3,2,1]" 
        class="stars-row"
        (click)="setResena(s)"
      >
        <span *ngFor="let star of [].constructor(s)">â­</span>
        <span *ngFor="let empty of [].constructor(5 - s)">â˜†</span>
      </div>
    </div>
  </aside>

  <!-- LISTADO DE PAQUETES -->
  <section class="lista-paquetes">

    <div class="paquete-card" *ngFor="let p of paquetesFiltrados">
      <img [src]="p.img" alt="">
      <h4>{{ p.nombre }}</h4>
      <p>S/.{{ p.precio }}</p>
<button mat-flat-button class="btn-carrito" (click)="agregarAlCarrito(p)">
    AÃ±adir al carrito ğŸ›’
  </button>
      <div class="rating">
        <span *ngFor="let _ of [].constructor(p.stars)">â­</span>
        <span *ngFor="let _ of [].constructor(5 - p.stars)">â˜†</span>
      </div>
    </div>

    <!-- PAGINACIÃ“N -->
    <div class="pagination">
      <span *ngFor="let n of paginas" 
            [class.active]="n === paginaActual"
            (click)="setPagina(n)">
        {{ n }}
      </span>
      <span (click)="nextPage()">â†’</span>
    </div>

  </section>
<div class="modal-backdrop" 
     *ngIf="modalCarritoAbierto" 
     (click)="cerrarModal()"></div>

<div class="modal-carrito" 
     *ngIf="modalCarritoAbierto">

  <div class="modal-header">
    <h2>Tu Carrito</h2>
    <button class="close-btn" (click)="cerrarModal()">âœ•</button>
  </div>

  <div class="items">
    <div class="item" *ngFor="let item of carrito; let i = index">
      
      <img [src]="item.img" />

      <div class="info">
        <h3>{{ item.nombre }}</h3>
        <p>S/ {{ item.precio }}</p>

        <div class="cantidad">
          <button (click)="restarCantidad(i)">-</button>
          <span>{{ item.cantidad }}</span>
          <button (click)="sumarCantidad(i)">+</button>
        </div>
      </div>

      <button class="remove" (click)="eliminar(i)">ğŸ—‘</button>
    </div>
  </div>

  <div class="modal-footer">
    <h3>Total: S/ {{ totalCarrito }}</h3>
    <button mat-flat-button routerLink="/confirmarPago" class="btn-pagar">Ir al pago</button>
  </div>

</div>
</main>

<app-footer></app-footer>